<%= simple_form_for @account, html: { id: "account-add-form" } do |f| %>
<div class="panel-body">
	<%= f.input :name, label: "Account Name", required: true %>

	<% if @account.new_record? %>
		<%= f.fields_for :addresses_attributes do |add| %>
			<%= add.input :street_address, required: true, label: "Street Address", :input_html => { :name => "account[addresses_attributes][][street_address]"} %>
			<%= add.input :city, required: true, label: "City", :input_html => { :name => "account[addresses_attributes][][city]"} %>
			<%= add.input :postcode, required: true, label: "Postcode/Zipcode", :input_html => { :name => "account[addresses_attributes][][postcode]"} %>
			<%= add.input :region, required: true, label: "Province/State", :input_html => { :name => "account[addresses_attributes][][region]"} %>
				
			<div class="form-group">
				<label class="col-sm-3 control-label">Country<span class="asterisk">*</span></label>
				<div class="col-sm-6">
				<%= add.input_field :country, { required: true, priority: [ "Canada", "United States", "United Kingdom" ],  class: "select2", name: "account[addresses_attributes][][country]" } %>
				</div>
			</div>
		<% end %>
	<% end %>
	<!--<div class="input-fields-wrap">
		<div class="form-group">
			<label class="col-sm-3 control-label">Street<span class="asterisk">*</span></label>
			<div class="col-sm-6">
				<input type="text" name="account[addresses_attributes][][street_address]" class="form-control" required>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">City<span class="asterisk">*</span></label>
			<div class="col-sm-6">
				<input type="text" name="account[addresses_attributes][][city]" class="form-control" required>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Postcode/Zipcode<span class="asterisk">*</span></label>
			<div class="col-sm-6">
				<input type="text" name="account[addresses_attributes][][postcode]" class="form-control" required>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Province/State<span class="asterisk">*</span></label>
			<div class="col-sm-6">
				<input type="text" name="account[addresses_attributes][][region]" class="form-control" required>
			</div>
		</div>

		<div class="form-group">
			<label class="col-sm-3 control-label">Country<span class="asterisk">*</span></label>
			<div class="col-sm-6">
				<input type="text" name="account[addresses_attributes][][country]" value="CA" class="form-control" required>
			</div>
		</div>
	</div>-->
	<!--<div class="btn-group">
		<a class="add-detail btn btn-success add-field-button"><i class="fa fa-plus"></i></a>
	</div>-->
	<!--
	<div class="form-group">
		<label class="col-sm-3 control-label">City<span class="asterisk">*</span></label>
		<div class="col-sm-6">
			<input type="text" name="account-address[city]" id="account-city" class="form-control" required>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-3 control-label">Postcode/Zipcode<span class="asterisk">*</span></label>
		<div class="col-sm-6">
			<input type="text" name="account-address[postcode]" id="account-postcode" class="form-control" required>
		</div>
	</div>
	<div class="form-group">
		<label class="col-sm-3 control-label">Province/State<span class="asterisk">*</span></label>
		<div class="col-sm-6">
			<input type="text" name="account-address[region]" id="account-region" class="form-control" required>
		</div>
	</div>

    <%#= f.input :country, as: :country, priority: [ "Canada", "United States", "United Kingdom" ] %>-->
    <% if @account.new_record? %>
		<%= f.simple_fields_for :contacts_attributes do |c| %>
			<%= c.input :name, required: true, label: 'Contact', :input_html => { :name => "account[contacts_attributes][][name]"} %>

			<div class="form-group">
				<label class="col-sm-3 control-label">Type<span class="asterisk">*</span></label>
				<div class="col-sm-6">
					<%= c.select( :type, options_for_select(Contact::CONTACT_TYPES), {}, { :class => "select2", :name => "account[contacts_attributes][][type]" } ) %>
				</div>
			</div>

			<%= c.input :value, required: true, :input_html => { :name => "account[contacts_attributes][][value]"} %>
		<% end %>
	<% end %>

	<!--<div class="form-group">
		<label class="col-sm-3 control-label">Contact Name</label>
		<div class="col-sm-6">
			<input type="text" name="account-contact_name" id="account-contact_name" class="form-control">
		</div>
	</div>

	<div class="form-group">
		<label class="col-sm-3 control-label">Contact</label>
		<div class="col-sm-6">
			<div class="row" id="account-contact-row">
				<div class="col-sm-3">
					<select name="account-contact[1][contact-type]" class="form-control input-sm">
						<option value="phone">Phone</option>
						<option value="mobile">Mobile</option>
						<option value="fax">Fax</option>
						<option value="email">Email</option>
						<option value="website">Website</option>
						<option value="twitter">Twitter</option>
						<option value="facebook">Facebook</option>
						<option value="youtube">Youtube</option>
						<option value="instagram">Instagram</option>
					</select>
				</div>
				<div class="col-sm-8">
					<input type="text" name="account-contact[1][contact-details]" placeholder="Details" class="form-control" required>
				</div>
				<div class="col-sm-1">
					<div class="btn-group">
						<a class="add-detail btn btn-success"><i class="fa fa-plus"></i></a>
					</div>
				</div>
			</div>
		</div>
	</div>-->


	<div class="form-group">
		<label class="col-sm-3 control-label">Account Status<span class="asterisk">*</span></label>
		<div class="col-sm-6">
			<%= f.select( :status_id, options_for_select(AccountStatus.all.collect{ |a| ["#{a.name}", a.id] }), {}, { :class => 'select2' }) %>
		</div>
	</div>


	<div class="form-group">
		<label class="col-sm-3 control-label">Assign To<span class="asterisk">*</span></label>
		<div class="col-sm-6">
            <%= f.select( :assign_to, options_for_select(@users.collect{ |u| ["#{u.first_name} #{u.last_name}", u.id] }), {}, { :class => 'select2' })%>
		</div>
	</div>
	<%#= f.input :assign_to, required: true, as: :select, :collection => @users.collect{ |u| ["#{u.first_name} #{u.last_name}", u.id] }, :include_blank => false %>


	<div class="form-group">
		<label class="col-sm-3 control-label">Shared With</label>
		<div class="col-sm-6">
			<%= f.select( :shared_with, options_for_select(@users.collect{ |u| ["#{u.first_name} #{u.last_name}", u.id] }), { :include_blank => true}, { :class => 'select2', 'data-placeholder' => "Type name of user you wish to share with"})%>
		</div>
	</div>
	<%#= f.input :shared_with, required: false, as: :select, :collection => @users.collect{ |u| ["#{u.first_name} #{u.last_name}", u.id] }, :include_blank => true, :input_html => { :class => 'select2', 'data-placeholder' => "Type name of user you wish to share with"} %>


	<%= f.input :about, :label => 'About', :input_html => { :rows => 5 }	%>

	<%= f.input :facts, :label => 'Quick Facts', :input_html => { :rows => 5 }  %>

	<div class="form-group">
		<label class="col-sm-3 control-label">Picture</label>
		<div class="col-sm-6">
			<label title="Upload image file" for="inputImage" class="btn btn-primary">
			    <input type="file" accept="image/*" name="file" id="inputImage" class="hide">Upload new image
			</label>
			<div class="account-avatar">
			    <img src="/assets/images/default_account_avatar.png" alt="Picture">
			</div>
		</div>
	</div>
</div><!-- panel-body -->

<div class="panel-footer">
	<div class="row">
		<div class="col-sm-6 col-sm-offset-3">
			<button type="submit" class="btn btn-primary" name="save" id="save">Save</button>&nbsp;
			<button class="btn btn-default" name="cancel" id="cancel">Cancel</button>
		</div>
	</div>
</div><!-- panel-footer -->
<% end %>