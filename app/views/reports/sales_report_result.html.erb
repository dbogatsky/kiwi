<% content_for :pageheader do %>
  <h2><i class="fa fa-bar-chart-o"></i> Sales Report</h2>
<% end %>
<div class="contentpanel">

  <div class="row">
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-success panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-dollar"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Grand Total Of Sales (000's)</strong></small>
                <h1><%= %>$10,000</h1>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong>AVG Per Week</strong></small>
                <h5><%= %>$10</h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong>AVG Per Day</strong></small>
                  <h5><%= %>$1</h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div>
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-primary panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-sign-in"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Total Visits</strong></small>
                <h1><%= %>1000</h1>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong>AVG Per Week</strong></small>
                <h5><%= %>100</h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong>AVG Per Day</strong></small>
                <h5><%= %>1.25</h5>
              </div>
            </div><!-- row -->
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-dark panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
               <i class="fa fa-arrow-circle-up"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Top Trending <br />Products</strong></small>
                <small class="stat-label" style="text-align: left;">
                <h5>
                1. Product 1<br />
                2. Product 2<br />
                3. Product 3<br />
                </h5>
                <h6>
                4. Product 4<br />
                5. Product 5<br />
                6. Product 6<br />
                </h6></small>
              </div>
            </div>
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-danger panel-stat">
        <div class="panel-heading" style="height: 165px;">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-arrow-circle-down"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Bottom Trending <br />Products</strong></small>
                <small class="stat-label" style="text-align: left;">
                <h5>
                1. Product 1<br />
                2. Product 2<br />
                3. Product 3<br />
                </h5>
                <h6>
                4. Product 4<br />
                5. Product 5<br />
                6. Product 6<br />
                </h6></small>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
  </div><!-- row -->

  <div class="row">
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-success panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-dollar"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Grand Total Of Sales (000's)</strong></small>
                <h1><%= %>$10,000</h1>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong>AVG Per Week</strong></small>
                <h5><%= %>$10</h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong>AVG Per Day</strong></small>
                  <h5><%= %>$1</h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div>
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-primary panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-sign-in"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Total Visits</strong></small>
                <h1><%= %>1000</h1>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong>AVG Per Week</strong></small>
                <h5><%= %>100</h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong>AVG Per Day</strong></small>
                <h5><%= %>1.25</h5>
              </div>
            </div><!-- row -->
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-info panel-stat">
        <div class="panel-heading hight_145">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
               <i class="fa fa-arrow-up"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Top Performing Products</strong></small>
                <small class="stat-label" style="text-align: left;">
                <h6>
                1. Product 1<br />
                2. Product 2<br />
                3. Product 3<br />
                4. Product 4<br />
                5. Product 5<br />
                </h6></small>
              </div>
            </div>
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
    <div class="col-sm-6 col-md-3">
      <div class="panel panel-warning panel-stat">
        <div class="panel-heading" style="height: 165px;">
          <div class="stat">
            <div class="row">
              <div class="col-xs-4">
                <i class="fa fa-arrow-down"></i>
              </div>
              <div class="col-xs-8 text-center">
                <small class="stat-label"><strong>Top Underacheiving Products</strong></small>
                <small class="stat-label" style="text-align: left;">
                <h6>
                1. Product 1<br />
                2. Product 2<br />
                3. Product 3<br />
                4. Product 4<br />
                5. Product 5<br />
                </h6></small>
              </div>
            </div><!-- row -->
            <div class="mb15"></div>
            <div class="row">
              <div class="col-xs-6 text-center" style="padding-left: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
              <div class="col-xs-6 text-center" style="padding-right: 0px">
                <small class="stat-label"><strong></strong></small>
                <h5><%=%></h5>
              </div>
            </div>
          </div><!-- stat -->
        </div><!-- panel-heading -->
      </div><!-- panel -->
    </div><!-- col-sm-6 -->
  </div><!-- row -->

  <div class="row">
    <div class="col-sm-6">
      <div class="panel panel-report panel-alt">
        <div class="panel-heading">
          <h3 class="panel-title">Meetings by Account Status</h3>
        </div>
        <div class="panel-body">
         <div id="account_status_pie_chart" class="chart-height"></div>
        </div><!-- panel-body -->
      </div>
    </div>
    <div class="col-sm-6">
      <div class="panel panel-report panel-alt">
        <div class="panel-heading">
          <h3 class="panel-title">Meetings by Day of Week</h3>
        </div>
        <div class="panel-body">
         <div id="day_of_week_bar_chart" class="chart-height"></div>
        </div><!-- panel-body -->
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <div class="panel panel-report panel-alt">
        <div class="panel-heading">
          <h3 class="panel-title">Meetings by Status</h3>
        </div>
        <div class="panel-body">
         <div id="meeting_by_status_dognut_chart" class="chart-height"></div>
        </div><!-- panel-body -->
      </div>
    </div>
    <div class="col-sm-6">
      <div class="panel panel-report panel-alt">
        <div class="panel-heading">
          <h3 class="panel-title">Meetings by Type</h3>
        </div>
        <div class="panel-body">
         <div id="type_of_meeting_bar_chart" class="chart-height"></div>
        </div><!-- panel-body -->
      </div>
    </div>
  </div>

<script type="text/javascript">

  function showMap(div_id, lat, lng, loc){
    var map = new GMaps({
      div: div_id,
      lat: lat,
      lng: lng,
      zoom: 1,
    });

    var marker = map.addMarker({
      lat: lat,
      lng: lng,
      title: loc,
    });
  }

  var data = '<%=@data%>';
  data = JSON.parse(data.replace(/&quot;/g,'"'))
  var m4 = new Morris.Bar({
    element: 'day_of_week_bar_chart',
    data: data,
    xkey: 'y',
    ykeys: ['a'],
    xLabelMargin: 5,
    labels: ['Meetings'],
    barColors: ['#1CAF9A'],
    lineWidth: '1px',
    fillOpacity: 0.8,
    smooth: false,
    stacked: true,
    resize: true,
    hideHover: true
  });

  var meeting_comparison_data = "<%=@meeting_comparison_data%>"
  meeting_comparison_data = JSON.parse(meeting_comparison_data.replace(/&quot;/g,'"'))
  var m5 = new Morris.Bar({
    element: 'type_of_meeting_bar_chart',
    data: meeting_comparison_data,
    xkey: 'y',
    ykeys: ['a', 'b'],
    labels: ['General meetings', 'Regular meetings'],
    barColors: ['#428BCA', '#4CAF50'],
    resize: true,
    hideHover: true,
    barSizeRatio: .2
  });

  var account_data=  '<%=@account_data%>';
  var color = '<%=@color%>'
  account_data = JSON.parse(account_data.replace(/&quot;/g,'"'));
  color = JSON.parse(color.replace(/&quot;/g,'"'));
  var m6 =  new Morris.Donut({
    element: 'account_status_pie_chart',
    data: account_data,
    resize: true,
    stacked: true,
    colors: color,
    formatter: function (y, data) { return y + '%'}
  });

  var meeting_by_status=  '<%=@meeting_by_status%>';
  meeting_by_status = JSON.parse(meeting_by_status.replace(/&quot;/g,'"'));
  var m7 =  new Morris.Donut({
    element: 'meeting_by_status_dognut_chart',
    data: meeting_by_status,
    resize: true,
    stacked: true,
    colors: ['#428BCA', '#4CAF50', '#999'],
    formatter: function (y, data) { return y + '%'}
  });

  jQuery(document).ready(function() {
    //"use strict";
    jQuery('#meetingTable').dataTable({
      "sPaginationType": "full_numbers",
      "lengthMenu": [[50, 100, 150, -1], [50, 100, 150, "All"]],
      "pageLength": 50,
      "bFilter": false
    });
  });
  $(window).resize(function () {
    m4.redraw();
    m5.redraw();
    m6.redraw();
    m7.redraw();
  });
</script>

