<%=render 'company_form'%>

<script>
  $(function(){

    var $validator = $("#company-add-form").validate({
      highlight: function(element) {
        $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
      },
      success: function(element) {
        $(element).closest('.form-group').removeClass('has-error');
      }
    });

    $('#validationWizard').bootstrapWizard({
      tabClass: 'nav nav-pills nav-justified nav-disabled-click',
      onTabClick: function(tab, navigation, index) {
        return false;
      },
      onNext: function(tab, navigation, index) {
        console.log(index)
        var $valid = $('#company-add-form').valid();

        if(!$valid) {
          $validator.focusInvalid();
          return false;
        }

      },
      onTabShow: function(tab, navigation, index){
        if(index == 3){
            $(".pager .next").hide();
            $('.pager .finish').removeClass('disabled');
            $(".pager .finish").show();
          }else{
            $(".pager .next").show();
            $(".pager .finish").hide();
          }
      }

    });

    $(".pager .finish").click(function(e){
      e.preventDefault();
      $("#company-add-form").submit();
    })
  })
</script>