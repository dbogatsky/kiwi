<div class="modal fade" id="upload">
  <div class="modal-dialog">
    <!-- Popup content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Upload Media File</h4>
      </div>
      <div class="modal-body">
        <%= form_tag({:action => 'upload_file'}, :name => 'upload-media-file', :multipart => true) do %>
          <div class="div-oth-input"><%= text_field_tag :filename, nil, placeholder: 'Name', class: 'form-control name_field' %>
          </div>
          <div class="div-oth-input"><%= file_field 'media', 'payload', class: 'form-control file_field', accept: 'audio/*|video/*|image/*|application/pdf|application/msword| application/vnd.openxmlformats-officedocument.wordprocessingml.document|application/vnd.ms-excel|application/vnd.openxmlformats-officedocument.spreadsheetml.sheet|MIME_type'  %>
            <span class="help">Only videos, audios, images and docs are allowed.</span>
          </div>
          <%= hidden_field_tag :folder_id, '0' %>
          <%= submit_tag "Upload", :class => 'btn btn-primary img_up' %>
        <% end %>
        <div class="pre_load">
         <div id="status"><i class="fa fa-spinner fa-spin"></i></div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    $('.pre_load').hide();
  });
  $(".img_up").click(function() {
  if (!($('.name_field').val() == '' || $('.file_field').val() == ''))
    {
       $('.pre_load').show();
    }
  });
</script>
