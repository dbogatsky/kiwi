<div class="modal fade" id="upload">
  <div class="modal-dialog">
    <!-- Popup content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Upload Media File</h4>
      </div>
      <div class="modal-body">
        <%= form_tag({:action => 'upload_file'}, :name => 'upload-media-file', :multipart => true) do %>
          <div class="div-oth-input"><%= text_field_tag :filename, nil, placeholder: 'Name', class: 'form-control name_field' %>
          </div>
          <div class="div-oth-input"><%= file_field 'media', 'payload', class: 'form-control file_field', accept: 'audio/*|video/*|image/*|application/pdf|application/msword| application/vnd.openxmlformats-officedocument.wordprocessingml.document|application/vnd.ms-excel|application/vnd.openxmlformats-officedocument.spreadsheetml.sheet|MIME_type'  %>
            <span class="help">Only videos, audios, images and docs are allowed.</span>
          </div>
          <%= hidden_field_tag :folder_id, nil %>
          <%= submit_tag "Upload", :class => 'btn btn-primary img_up'%>
          <!-- <img alt="" src="<%#='/assets/images/uploading.png'%>" class=""> -->
          <p class="upload_text"><b>Uploading your file...</b><p/>

        <% end %>
      <!--  <div class="progress" style="margin-top: 5px">
        <div class="progress-bar progress-bar-success" data-values="100">0</div>
       </div> -->
        <div class="pre_load">
          <div id="status"><i class="fa fa-spinner fa-spin"></i></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $('.pre_load').hide();
    $('.upload_text').hide()
  });
  $(".img_up").click(function() {
  if (!($('.name_field').val() == '' || $('.file_field').val() == ''))
    {
      $(".img_up").hide();
      $('.pre_load').show();
      $('.upload_text').show();
    }
  });

  // $("form[name='upload-media-file']").submit(function( event ) {

  // });

  // $(document).ready(function() {
  //   $('.progress').hide();
  // });
  // $(".img_up").click(function() {
  //   if (!($('.name_field').val() == '' || $('.file_field').val() == ''))
  //   {
  //     $('.progress').show();
  //     $(".progress div").each(function () {
  //         var display = $(this),
  //         currentValue = parseInt(display.text()),
  //         nextValue = $(this).attr("data-values"),
  //         diff = nextValue - currentValue,
  //         step = (0 < diff ? 1 : -1);
  //         if (nextValue == "0") {
  //             $(display).css("padding", "0");
  //         } else {
  //             $(display).css("color", "#fff").animate({
  //                 "width": nextValue + "%"
  //             }, 10000);
  //         }
  //       for (var i = 0; i < Math.abs(diff); ++i) {
  //         setTimeout(function () {
  //             currentValue += step
  //             display.html(currentValue + "%");
  //         }, 200* i);
  //       }
  //     });
  //   }
  // });
</script>
